---
title: "繰り返される問題を3ステップで根絶する氷山モデル"
emoji: "🧊"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["システム思考", "氷山モデル", "AI"]
published: true
published_at: 2025-12-18 09:00
publication_name: "dress_code"
---

# TL;DR

- 目に見える問題は「氷山の一角」で、水面下に**パターン・構造・メンタルモデル**が隠れている
- AI に聞けば表面的な修正はできるが、**構造を変えないと同じ問題は繰り返される**
- 問題が起きたら「どう直す？」の前に「**なぜ起こるのか？**」「**なぜ繰り返されるのか？**」と問いかける習慣が重要

# はじめに

この記事は [Dress Code Advent Calendar 2025](https://adventar.org/calendars/12017) の 18 日目の記事です。

こんにちは、Dress Code でプロダクトエンジニアをしている [ないとー](https://x.com/_bwkw_) です！AI との共創が当たり前になった今、目の前の問題を解決するスピードは劇的に上がりました。テストが落ちたら AI に聞く、レビューで指摘されたら AI に聞く、障害が起きたら AI に聞く。言われた通りに直せば、大抵のことはその場で収まるかと思います。

ただ、同じような問題が何度も起きていないでしょうか？ AI は「どう直すか？」は教えてくれますが、「なぜ起こるのか？」「なぜ繰り返されるのか？」は教えてくれません。問題が繰り返されるのは、目に見える表面だけを直して、その奥にある「**構造**」や「**メンタルモデル**」に手をつけていないからです。

この記事では、問題の構造を捉えるためのフレームワーク「**氷山モデル**」を紹介します。同じような問題が繰り返されることに悩んでいる方の参考になれば幸いです👋

# 氷山モデルとは

氷山モデルは、「**システム思考**」という分野で使われるフレームワークです。システム思考とは、問題を個別の要素ではなく、相互に影響し合う「システム」として捉える考え方で、ドネラ・H・メドウズの『[世界はシステムで動く](https://www.kinokuniya.co.jp/f/dsg-01-9784862761804)』で詳しく解説されています。

「氷山の一角」という言葉がありますが、システムの問題も同じです。見えている現象の背後に、より深い層の構造が隠れています。

![氷山の一角](/images/iceberg-model/iceberg-model.jpg)

| 層  | 名前           | 説明                                                       |
| --- | -------------- | ---------------------------------------------------------- |
| 層1 | 出来事         | 目に見える問題。バグ、障害、クレームなど                   |
| 層2 | パターン       | 出来事の繰り返し。時系列で見ると浮かび上がるトレンド       |
| 層3 | 構造           | パターンを生み出す仕組み。プロセス、ルール、アーキテクチャ |
| 層4 | メンタルモデル | 構造を支える前提や信念。「当たり前」と思っていること       |

# 具体例：本番障害が繰り返される

氷山モデルの理解を深めるために、開発現場でよく遭遇する「本番障害」を例に各層を掘り下げてみます。

:::message
以下は氷山モデルを分かりやすく説明するための例です。実際の現場では、層3(構造)を変えれば解決するケースも多いでしょう。しかし、**構造を変えても効果が出ない**、**変えようとしても抵抗がある**といった場合は、層4(メンタルモデル)まで掘り下げる必要があります。
:::

## 層1「出来事」

月曜の朝、Slack に障害アラートが飛んできます。調査すると外部 API へのリクエストがタイムアウトしていたので、AI にリトライ処理の実装方法を聞いて該当箇所を修正し、30 分で復旧しました。

## 層2「パターン」

復旧後、過去の障害履歴を見返してみると、以下のようになっていました。

| 時期 | 障害内容                 | 直接原因                | 対応時間 |
| ---- | ------------------------ | ----------------------- | -------- |
| 1月  | 決済処理が失敗           | 外部 API 応答遅延       | 1時間    |
| 3月  | 画像アップロードが止まる | S3 への接続タイムアウト | 45分     |
| 5月  | ログイン不可             | 認証サービス障害        | 2時間    |
| 7月  | メール送信が滞留         | SMTP サーバー過負荷     | 1.5時間  |
| 今回 | 500エラー多発            | 外部 API タイムアウト   | 30分     |

一見バラバラに見えますが、**すべて「外部依存」に起因しており、すべてリリース後 1〜2 週間で発生しています**。個々の障害だけを見ていると気づきにくいですが、並べてみると「新機能リリース後に外部依存の障害が起きやすい」というパターンが見えてきます。

層2は「対応する層」ではなく「気づきの層」です。出来事を時系列で並べて繰り返しのパターンを発見することが、より深い層への介入の第一歩になります。

## 層3「構造」

このパターンが繰り返されるのは「次から外部 API には気をつけよう」で済む話ではなく、開発プロセス自体にこの種の障害を見逃す構造があるからです。

1. **外部依存の障害を想定したテストがない**

   単体テストでは外部 API をモック化し、結合テストでも外部サービスが正常に動く前提でしかテストしていないため、「外部 API が遅延したら？」「タイムアウトしたら？」というケースは確認されていません。

2. **本番相当の負荷でテストしていない**

   開発環境では同時接続数が 10 程度ですが、本番は 1000 を超えることもあるため、外部 API の同時リクエスト数制限に引っかかるのは本番で初めて分かります。

3. **障害対応後の振り返りが「直接原因」で止まっている**

   障害報告書には「リトライ処理を追加した」と書かれますが、「なぜ事前に検知できなかったか？」までは掘り下げません。「[ポストモーテム](https://sre.google/sre-book/postmortem-culture/)」は「誰が悪いか」ではなく「何が起きたか、なぜ起きたか」を問う文化で、これはまさに層3・層4への介入ですが、実際には障害が復旧した時点で振り返りが終わりがちです。

## 層4「メンタルモデル」

「層3の構造を変えれば解決するのでは？」と思うかもしれません。実際、異常系テストの追加や負荷テストの実施で多くの障害は防げるでしょう。しかし構造を変えようとしても、こんなことが起きていないでしょうか？

- 異常系テストを書こうと思っても、「工数がかかる」「優先度が低い」と後回しにしてしまう
- 根本原因を掘り下げようと思っても、「時間がない」「復旧したから大丈夫」で終わる
- 一度決めたルールを、いつの間にか守らなくなっている

構造を変えようとしても変えられない、あるいは変えても効果が出ない場合、層4まで掘り下げる必要があります。「なぜ異常系テストを書こうとしなかったのか？」「なぜ振り返りが直接原因で止まってしまうのか？」と問いを変えてみると、層3の構造的な問題は誰かが「これはまずい」と思えば変えられたはずなのに変えようとしなかった背景が見えてきます。そこには無意識に持っている「**メンタルモデル**」があります。

| メンタルモデル                       | 現実                                                   |
| ------------------------------------ | ------------------------------------------------------ |
| 外部サービスは落ちない               | 外部サービスも落ちる。依存先が増えるほどリスクも増える |
| 異常系は滅多に起きないからテスト不要 | 滅多に起きないからこそ、起きたときに対応できない       |
| 障害は復旧すれば OK                  | 復旧しても同じ構造なら同じ障害が再発する               |
| 本番でしか分からない                 | 本番を模した環境やテストで事前に分かることも多い       |

こういった前提を持っていると「異常系のテストを書こう」「障害の根本原因を掘り下げよう」という発想が生まれず、問題が起きても「復旧できたからOK」で終わってしまいます。

メンタルモデルは目に見えないため厄介ですが、行動を最も強く規定しているのはこの層です。とはいえ、メンタルモデルを変えるのは時間がかかります。AI との共創が当たり前になった今、まずは層3(構造)から変えにいくのが現実的です。構造が変われば行動が変わり、やがて認識も変わっていきます。

# 実践：3ステップで氷山を掘り下げる

氷山モデルのイメージが湧いてきたところで、実際に自分でも使える3ステップを紹介します。

![氷山の一角の実践](/images/iceberg-model/iceberg-model-practice.jpg)

## ステップ1「繰り返される問題を選ぶ」

「また同じようなバグが...」と思ったことがある問題を1つ選びます。選ぶときのポイントは以下の通りです。

- 頻度：過去3ヶ月で2回以上発生した
- コスト：毎回30分以上かかる
- 既視感：前にも見た気がする

最初から完璧に選ぶ必要はなく、「なんとなく繰り返してる気がする」という直感で十分です。

## ステップ2「4層で整理する」

選んだ問題を4つの層で整理します。「なぜ？」を繰り返して掘り下げるのは、トヨタ生産方式の「**[なぜなぜ分析](https://ja.wikipedia.org/wiki/%E3%81%AA%E3%81%9C%E3%81%AA%E3%81%9C%E5%88%86%E6%9E%90)**」に近い考え方です。

| 層                    | 問い                                     |
| --------------------- | ---------------------------------------- |
| 層1「出来事」         | 具体的に何が起きた？                     |
| 層2「パターン」       | 同じことが繰り返されてる？いつ、どこで？ |
| 層3「構造」           | なぜ繰り返す？仕組みやプロセスに問題は？ |
| 層4「メンタルモデル」 | 自分が当たり前と思っていることは？       |

## ステップ3「層3(構造)から介入する」

整理できたら、どこに介入するかを決めます。層1(出来事)だけ直しても問題は繰り返されるため、**層3(構造)を変えると層1(出来事)の問題は自然に減ります**。層4(メンタルモデル)を直接変えるのは難しいですが、層3(構造)を変えることで結果的に層4も変わることがあります。

たとえば「障害が起きたらなぜ事前に検知できなかったかを考える」という習慣(層3)を自分に課すと、最初は面倒でも続けているうちに「復旧すれば OK ではない」というメンタルモデル(層4)が自然と身についていきます。**構造が行動を変え、行動が認識を変えます。**

# おわりに

この記事では、問題の表面ではなく**構造**を捉えるための「**氷山モデル**」を紹介しました。

AI との共創が当たり前になった今、表面的な問題解決はますます容易になっています。だからこそ **AI にはできない「構造を見抜く力」** の価値が高まっていると感じます。

氷山モデルは特別なツールではなく、多くのエンジニアがすでにやっている思考法を言語化したものです。皆さんが良くやっているであろう「AI がしくじるパターンを抽象化してレビュー観点に加える」というのも、層2(パターン)を見つけて層3(構造)に介入する行為です。次に「これ、前にも似たようなの見たな」と思ったら、それは氷山を掘り下げるチャンスかもしれません。

この記事が、繰り返される問題に悩んでいる方の参考になれば幸いです👋
