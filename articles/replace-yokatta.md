---
title: "リプレイス 1 年の現場で見えた、やって良かった 7 つのこと"
emoji: "🚚"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["リプレイス"]
published: false
publication_name: "levtech"
---

# TL;DR

- 事前準備では具体的な数値と実例で **”説得力”** を持たせることが重要
- 運用保守チームとリプレイス専任チームの分離で **”推進力”** を確保
- 不要コードの早期削除で **“運用負荷”** を軽減し、コードベースをスリムに保つ
- プロセス標準化により **“迷い”** をなくし、効率的な作業を実現
- 段階的リリースで小さな成功体験を積み重ね、チームの **“安心感”** を醸成
- **“定量的なリプレイス完了基準”** の設定で品質を担保
- 改善タスクを実施し、定期的に **“負債”** を解消する

# はじめに

こんにちは、リプレイスチームでバックエンドをメインに担当している内藤です！

私は、これまで 1 年ほど Web アプリケーションのリプレイスプロジェクトに携わってきましたが、その過程で「やって良かった」と実感できる取り組みを多く得ることができました。

リプレイスに関する技術的な情報は世の中に多くありますが、進め方やプロセスにフォーカスした話は意外と少ないと感じています。実際、私も最初は「どう進めればいいんだろう？」と悩むことが多かったです。

そこで本記事では、現場での経験をもとに、特に効果的だった 7 つのポイントを厳選してご紹介します。これからリプレイスに取り組む方や、現場でのヒントを探している方の一助となれば幸いです👋

# その1. 事前準備で “説得力” を持たせよう

リプレイス プロジェクトを始める際、最初に越えるべき壁は「**なぜ今リプレイスを行うのか**」という社内の納得感の獲得ですね。ここで重要なのは、抽象的な説明ではなく、具体的な数値や実例を用いて説得力を持たせることだと実感しました。

まず、リプレイスを行わなかった場合に発生するリスクを明確に示すことから始めました。例えば、サポート終了に伴うセキュリティリスクが 1 年後に何倍にも増大する可能性や、[実際に発生したセキュリティインシデントによる企業の損害事例](https://www.jnsa.org/result/incidentdamage/data/2024-1.pdf)を紹介し、危機感を共有しました。 また、変更容易性の低いシステムによる開発速度の低下についても、[研究結果](https://arxiv.org/abs/2203.04374)を基に客観的なデータとして説明しました。

次に、既存システムの現状を客観的に把握するため、コードの複雑さや依存関係を詳細に調査しました。その結果をもとに、リプレイスにかかる期間や工数のざっくりとした見積もりを作成し、関係者に提示することで、「本当にやるべきか」という疑念を払拭できたと思います。

// 画像入れる

このように、リスクの具体化と工数の見積もりをセットで示すことで、社内の理解と協力を得る基盤を築けたことが、プロジェクト成功の第一歩となりました。

# その2. 体制づくりで “推進力” を確保する

大規模なリプレイスを成功させるには、運用保守チームとリプレイス専任チームを明確に分けることが不可欠だと実感しました。兼任体制では、どうしても日々の運用業務が優先され、リプレイスが後回しになりがちですよね。

そこで、リプレイス専任チームを立ち上げ、プロジェクトに 100% 集中できる環境を整えました。これにより、意思決定や作業のスピードが格段に上がり、停滞しがちだったリプレイスも着実に前進するようになりました。

役割を明確に分担し、専任チームがリプレイスの推進力となる体制を築いたことは、プロジェクト成功の大きな要因だったと感じています。皆さんも、もし兼任で進めている場合は、専任体制の検討をオススメします。

# その3. 不要コードの早期削除で “運用負荷” を減らす

リプレイスを進める中で強く実感したのは、不要コードを早めに削除することの重要性です。アクセスログをもとに、過去半年間使われていない機能や API を洗い出し、コード削除を進めていきました。さらに、リプレイスが完了した箇所についても、念のため 2 ヶ月間アクセスがないことを確認した上で、古いコードを速やかに削除し、運用対象となるコード ベースの肥大化を防ぎました。

不要なコードを残しておくと、運用保守の範囲がどんどん広がり、結果的にチーム全体の負担やトラブルの温床になってしまいます。「もしかしたら使っているかも...」「いつか使うかも...」と思ってしまいがちですが、思い切って削除することが何よりも大切です。

リプレイスのタイミングで不要コードを積極的に削除し、運用対象をスリムに保つことは、プロジェクトの健全な推進と現場の負荷軽減に直結する施策だと感じています。

# その4. プロセス標準化で “迷い” をなくす

リプレイスを効率的に進めるためには、プロセスの標準化が不可欠です。プロセスの標準化とは、一連の作業内容の目的や手順を事前に定義することを指します。これにより、「作業の漏れがないか？」「この方法で正しいのか？」といった悩みに費やす時間を大幅に削減できます。

具体的には、外部仕様調査、内部仕様調査、要件定義、ドメインモデル図作成、シーケンス図作成 ... といった一連の流れをテンプレート化しています。以下に例として外部仕様調査プロセスを示します。

// 画像入れる

また、複数チームで並行して作業を進める場合、標準化されたプロセスがあることで、各チーム間の認識ズレや手戻りが最小限に抑えられると考えています。（まだ複数チームではやっていないんですけどね...）

迷ったときに立ち返る指針があることは、現場の安心感にもつながります。プロセス標準化は、リプレイスを着実に前進させるための強力な土台だと感じています。また、リプレイス完了のたびにプロセス定義を適宜更新することで、より最適化されたプロセスを目指しています。最近だと、「スモークテスト」と言われる「本格的なテスト実行前にテスト対象のソフトウェアがテストを行うに値する品質であるかを確認する」ステップを追加したことで、テスト効率が向上しました。

# その5. 段階的リリースで “安心感” を生む

リプレイスは、一度に全てを切り替えるのではなく、ページや昨日単位で小さく区切って段階的にリリースしていきました。

まずはユーザ影響が少なく比較的リプレイスが行いやすい機能（FAQ、問い合わせなど）から始め、問題がなければ次の対象へと範囲を広げていく。この流れを繰り返すことで、小さな成功体験を積み重ね、チームの共通認識と自信を育てることができました。

この方法の最大の利点は、トラブルが発生しても影響範囲が限定され、すぐに切り戻せる点です。「もし問題が起きたらどうしよう」という現場の不安を抑えつつ、着実にプロジェクトを前進させることができます。段階的リリースは、安心感をもたらす有効な手法だと実感しています。

# その6. ”リプレイス完了基準” を明確にする

リプレイス後の評価は、どうしても「保守性が上がった」「セキュリティリスクが減った」といった定性的な表現に偏りがちですよね。我々のチームもこの定性的な評価にモヤモヤを抱えていました。そこで我々のチームは、完了基準をできる限り明確かつ定量的に設定することを重視しました。

まず内部品質については、[SonarLint](https://marketplace.visualstudio.com/items?itemName=SonarSource.sonarlint-vscode) を活用し、指摘事項がゼロであることを最低条件としています。SonarLint は IDE 上でリアルタイムにコード品質をチェックし、バグやセキュリティリスク、コードスメルを即座に検出・修正できるため、個々の開発者が日々のコーディング段階で品質を高めるのに非常に有効です。今後は、SonarQube も活用していくことでより包括的かつ継続的な品質管理を実現していくことを考えています。また、セキュリティ面では、社内の脆弱性管理ツールを CI に組み込み、リリース前に自動チェックを徹底しました。これにより、ヒューマンエラーによる脆弱性の見逃しリスクを大幅に減らすことができました。

このように、定量的な基準を明確にすることで、自信を持ってリプレイスが完了したと言える状態を実現しています。曖昧な評価基準では、具体的に何が良くなったのかよく分からないということになりかねませんからね。

# その7. 改善タスクを実施し、定期的に "負債" を解消する

リプレイスを行いつつも、技術負債は一定のスピードでどうしても溜まっていってしまいます。だからこそ、リプレイスとは別にリプレイスによって生まれた負債も定期的に解消することが重要です。自チームでは、ページ単位でリプレイスを行っていますが、そのリプレイスが終わるタイミングで 2 週間ほど改善タスクに取り組む時間を設けています。直近では CI の実行時間短縮や、フレーキーな CI の改善、テスト間の依存関係の排除による独立性向上などを行いました。

実際にリプレイスを進めてみると、どうしても新しいシステムでも完璧ではない部分が出てきます。「今度時間があるときに...」と先延ばしにするのではなく、リプレイスの間のタイミングで積極的に負債を解消することで、新たに生まれる負債の蓄積を防ぎ、チーム全体の開発体験が向上し、結果的にリプレイス作業自体もスムーズに進むようになりました。

# おわりに

今回は、1 年間のリプレイスプロジェクトで「やって良かった」と実感した 7 つのポイントをご紹介しました。

リプレイスは技術的な挑戦だけでなく、チーム体制やプロセス、そして関係者との合意形成など、様々な側面での工夫が求められる複雑なプロジェクトです。私も最初は手探り状態でしたが、この記事でご紹介したような取り組みを通じて、着実に前進させることができました。

プロジェクトごとに状況は異なりますが、この記事が少しでも皆さんがリプレイスプロジェクトに取り組む際の参考になれば幸いです。

最後まで読んでいただき、ありがとうございました！
